name: "MQTT Channel qos2"
description: "MQTT Channel communication between pub and sub with qos2"

# 执行配置
config:
  execution_count: 1       # 测试执行次数
  time_sec: 90          # 总超时时间（秒）
  cwd: "build"             # 执行目录（相对于项目根目录）
  environment:             # 全局环境变量
    LOG_LEVEL: "info"


# 输入配置 - 定义要执行的脚本和它们的依赖关系
input:
  scripts:
    - path: "./start_examples_plugins_mqtt_plugin_pb_chn_benchmark_sub_qos2.sh"
      args: []                    # 脚本参数
      depends_on: []              # 依赖的脚本（空表示可以直接启动）
      delay_sec: 0                # 启动延迟（秒）
      time_sec: 60                # 脚本运行时间
      monitor:
        cpu: true
        memory: true
        disk: true
      environment:                # 脚本特定的环境变量
        ROLE: "server"
      cwd: ""                # 脚本执行目录
      shutdown_patterns: ["Benchmark plan 2 completed"]  # 当匹配到该字符串时，认为脚本已完成相应的测试，退出测试
      enabled_callbacks: []

    - path: "./start_examples_plugins_mqtt_plugin_pb_chn_benchmark_pub_qos2.sh"
      args: []
      depends_on: ["./start_examples_plugins_mqtt_plugin_pb_chn_benchmark_sub_qos2.sh"]  # 依赖服务器启动
      delay_sec: 3                # 等待3秒让服务器完全启动
      time_sec: 60
      monitor:
        cpu: true
        memory: true
        disk: true
      environment:
        ROLE: "client"
      cwd: ""
      shutdown_patterns: ["Bench completed."]  # 当匹配到该字符串时，认为脚本已完成相应的测试，退出测试
      enabled_callbacks: ["log_check"]
